<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="keywords" content="web-ppt模板">
	<meta name="description" content="自用web版PPT模板">
	<title>web编辑器TinyMCE应用及原理</title>
	<link href="css/index.css" type="text/css" rel="stylesheet">
	<link href="css/skin-default.css" class="skincss" type="text/css" rel="stylesheet">
	<link href="css/animate.css" type="text/css" rel="stylesheet">
	<script src="js/jquery-1.11.0.js" type="text/javascript"></script>
	<script src="js/jquery-mousewheel.js" type="text/javascript"></script>
	<script src="js/tiny_mce/tiny_mce.js" type="text/javascript"></script>
	<script>
		tinymce.init({
			mode: "exact",
			elements: "content-tinyarea1",
			width: '600px',
			height: '250px'
		});

		window.tinyObj = tinymce.init({
			theme: "advanced",
			mode: "exact",
			elements: "content-tinyarea2", 
			width: '600px',
			height: '532px'
		});
	</script>
	<script src="js/index.js" type="text/javascript"></script>
</head>
<body>
	<div class="wrap">
		<div class="header"></div>
		<div class="main">
			<div class="screen hidden main1 main-page-current">
				<div class="topic">
					<h1 class="topic-text title1">富文本编辑器TinyMCE原理及应用</h1>
					<p class="topic-author title2">主讲人：许宁</p>
					<p class="topic-date title2">时间：2014年4月12日</p>
				</div>
			</div>
			<div class="screen hidden main2">
				<div class="left">
					<div class="menu text-menu">
						<h2 class="menu-title content-title title2">目录</h2>
						<ul class="menu-ul">
							<li class="menu-li">
								<i class="menu-li-icon bg-red"></i>
								<span class="menu-li-title menu-ableClick">富文本编辑器概念</span>
							</li>
							<li class="menu-li">
								<i class="menu-li-icon bg-blue"></i>
								<span class="menu-li-title menu-ableClick">富文本编辑器原理介绍</span>
								<ul class="menu-li-ul">
									<li class="menu-li-li menu-ableClick">普通文本编辑器</li>
									<li class="menu-li-li menu-ableClick">富文本编辑器</li>
									<li class="menu-li-li menu-ableClick">contenteditable兼容性</li>
								</ul>
							</li>
							<li class="menu-li">
								<i class="menu-li-icon bg-red"></i>
								<span class="menu-li-title menu-ableClick">TinyMCE的使用</span>
								<ul class="menu-li-ul">
									<li class="menu-li-li menu-ableClick">TinyMCE简介</li>
									<li class="menu-li-li menu-ableClick">初始化配置</li>
									<li class="menu-li-li menu-ableClick">自定义皮肤</li>
									<li class="menu-li-li menu-ableClick">官方插件</li>
									<li class="menu-li-li menu-ableClick">自定义插件</li>
									<li class="menu-li-li menu-ableClick">public方法</li>
								</ul>
							</li>
							<li class="menu-li">
								<i class="menu-li-icon bg-blue"></i>
								<span class="menu-li-title menu-ableClick">同类产品对比</span>
							</li>
							
							<li class="menu-li">
								<i class="menu-li-icon bg-red"></i>
								<span class="menu-li-title menu-ableClick">参考文献</span>
							</li>
						</ul>
					</div>
				</div>
				<div class="right text-body">
					<div class="content hidden page1 pt-page-current">
						<div class="content-box">
							<h2 class="content-title title2">一、富文本编辑器概念</h2>
							<div class="content-text">
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">	是基于浏览器的用来编辑文字、插入图片、插入表格等的功能模块
									</span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">
										类似word，不同之处在于，是在线并依赖于浏览器的。
									</span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">
										主要应用于在线文章编辑、博客发布、留言板等地方。
									</span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">
										一般情况以组件的形式被各个web项目调用。
									</span>
								</p>
								<div class="content-exam">
									<span class="content-pic">
										<h4 class="title4">例一：人人网日志编辑页</h4>
										<a href="http://blog.renren.com/blog/0/addBlog" target="_blank"><img src="cssimg/renren-blog.png"></a>
									</span>
									<span  class="content-pic">
										<h4 class="title4">例二：百度贴吧发帖页</h4>
										<a href="http://blog.renren.com/blog/0/addBlog" target="_blank"><img src="cssimg/baidu-tieba.png"></a>
									</span>
								</div>
							</div>
						</div>
					</div>
					<div class="content hidden page2">
						<div class="content-box">
							<h2 class="content-title title2">二、富文本编辑器原理介绍</h2>
							<div class="content-text hidden textPage1 text-page-current">
								<h3 class="title3">1、普通文本编辑器</h3>
								<p class="content-p">网站上常见的用于编辑文字的有以下HTML标签</p>
								<div class="content-p">
									<i class="content-icon"></i>
									<xmp class="content-span"><input type="text" name=""></xmp>
									<input class="content-input" type="text" placeholder="允许输入一行文本...">
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<xmp class="content-span"><textarea name=""></textarea></xmp>
									<textarea class="content-textarea" placeholder="允许输入一段文本..."></textarea>
								</div>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">因为上这两种元素不支持html标签，早期的浏览器通过在文字中间加上自定义标签如：[b]粗体文本[/b],[img]http://a.xnimg.cn/nx/core/theme/skin/mainframe/logo_new.png[/img]等,然后将这些自定义标签转换为html标签显示在浏览器页面上。</span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">示例：<a href="http://renren.com">http://renren.com</a></span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">缺点：非"所见即所得"</span>
								</p>														
							</div>
							<div class="content-text hidden textPage2">
								<h3 class="content-bold title3">2、富文本编辑器</h3>
								<div class="content-p">
									<i class="content-icon"></i>
									<xmp class="content-span">设置元素的contentEditable='true'，即可开启该元素的编辑模式<div contenteditable="true"></div></xmp>
									<div class="content-editDiv" contenteditable="true">
										这里可以编辑文字...
										<p style="font-weight: bold;">这段文本是粗体</p>
										<p style="color: #dd4b39;">这段文本是红色</p>
									</div>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">创建相应的HTML标签，插入被选中文本即可实现所见即所得的效果</span>
								</div>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">
									为了不影响当前document，通常情况下会在页面嵌入一个iframe元素作为编辑区，然后对这个iframe内的document（iframename.contentWindow.document）进行操作。
								</p>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">代码如下：</span>
									<div class="content-codeShow">
										<xmp><iframe name="" id=""></xmp>
										<xmp>	<html></xmp>
										<xmp>		<head></xmp>
										<xmp>		</head></xmp>
										<xmp>		<body contenteditable="true"></xmp>

										<xmp>		</body></xmp>
										<xmp>	</html></xmp>
										<xmp></iframe></xmp>
									</div>
								</div>
							</div>
							<div class="content-text hidden textPage3">
								<h3 class="content-bold title3">3、contenteditable兼容性</h3>
								
							</div>
							<div class="content-pageBar">
								<div class="content-pageBar-item bg-red">1</div>
								<div class="content-pageBar-item bg-blue">2</div>
								<div class="content-pageBar-item bg-red">3</div>
							</div>
						</div>
					</div>
					<div class="content hidden page3">
						<div class="content-box">
							<h2 class="content-title title2">三、TinyMCE的使用</h2>
							<div class="content-text hidden textPage1 text-page-current">
								<h3 class="title3">1、TinyMCE简介</h3>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">TinyMCE是一款轻量级的富文本编辑器,由javascript编写而成</span>
								</div>				
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">是根据LGPL license发布的自由软件（开源），可作为商业应用</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">目前版本4.0.21，详细信息官网查看：<a href="http://www.tinymce.com" target="_blank">http://www.tinymce.com</a></span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">源代码托管在github上，网址：<a href="https://github.com/tinymce/tinymce" target="_blank">https://github.com/tinymce/tinymce</a></span>
								</div>
								
							</div>
							<div class="content-text hidden textPage2">
								<h3 class="title3">2、初始化配置</h3>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">下载TinyMCE文件包：<a href="http://www.tinymce.com/" target="_blank">http://www.tinymce.com/</a></span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">head标签内放入以下代码：</span>
									<xmp class="content-span"><script type="text/javascript" src="./tiny_mce/tiny_mce.js"></script></xmp>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">调用TinyMCE的初始化方法，配置参数即可。下面是最简单的配置方式。
									</span>
								</p>

								<div class="content-code" style="width:350px;height: 231px;float: left;margin-right: 10px;">
									<div class="code-box">
										<xmp>tinymce.init({</xmp>
										<xmp>	mode: "exact",</xmp>
										<xmp>	elements: "content-tinyarea1",</xmp>
										<xmp>	width: '600px', </xmp>
										<xmp>	height: '200px' </xmp>
										<xmp>});</xmp>
									</div>
								</div>
								<div class="content-tinydiv">
									<textarea id="content-tinyarea1">
										这个textarea，将被初始化为富文本编辑器，里面的文字将会被显示在编辑器内。
									</textarea>
								</div>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">与textarea绑定的两点原因：</span>
									<span class="content-span">对已有的内容修改，可先将内容放在textarea内，TinyMCE实例初始化完成后，再将内容取出放入编辑器。</span>
									<span class="content-span">textarea里面可以写入标签，并且不会被解释。</span>
								</p>
							</div>
							<div class="content-text hidden textPage3">
								<p class="title3">3、自定义皮肤</p>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">当主题theme为advanced时，可以允许用户自定义皮肤（skin）</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">skin的值是自定义的皮肤文件包的名称skin: "nx"</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">自定义皮肤的文件目录：./js/tiny_mce/themes/advanced/skins</span>
									<span class="content-span">
										<img src="./cssimg/skin-url.png" style="display: block;float: left;border: 1px solid #aaa">
										<img src="./cssimg/skin.png" style="display: block;float: left;border: 1px solid #aaa;margin-left: 10px;">
										<img src="./cssimg/skin-inner.png" style="display: block;float: left;border: 1px solid #aaa;margin: 20px 0 0 10px;">
									</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span"><a href="#nogo" class="openPop">代码演示</a></span>
								</div>
							</div>
							<div class="content-text hidden textPage4">
								<h3 class="title3">4、官方插件</h3>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">编辑器所有的编辑功能（如，粗体，字体颜色，插入图片等）都被以插件的形式定义，供用户选择使用</span>
									
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">绝大多数插件都有可以以按钮的形式放在工具栏，类似word的工具栏</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">使用某插件需要配置</span><br>
									<span class="content-span">theme_advanced_buttons1: "undo,redo,bold,fontsizeselect"</span>
									<span class="content-span">theme_advanced_buttons2: "removeformat,hr,bullist,numlist,link,unlink,justifyleft,justifycenter,justifyright,justifyfull"</span>
									<span class="content-span">theme_advanced_buttons3: "italic,underline,backcolor"</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span"><a href="#nogo" class="openPop">代码演示</a></span>
								</div>
							</div>
							<div class="content-text hidden textPage5">
								<h3 class="title3">5、自定义插件</h3>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">TinyMCE提供了许多方法用来自定义插件，代码如下：</span>
									<div class="content-codeShow">
										<xmp>tinymce.create('tinymce.plugins.test', {</xmp>
										<xmp>	init: function(ed){</xmp>
										<xmp>		ed.addButton('testBtn', {</xmp>
										<xmp>			title: '测试插件',</xmp>
										<xmp>			cmd: 'test',</xmp>
										<xmp>			image: 'http://a.xnimg.cn/imgpro/emotions/tab/ali.png'</xmp>
										<xmp>		});</xmp>
										<xmp>		ed.addCommand('test', function(){</xmp>
										<xmp>			alert(1);</xmp>
										<xmp>		});</xmp>
										<xmp>	}</xmp>
										<xmp>});</xmp>
										<xmp>tinymce.PluginManager.add('test', tinymce.plugins.test);</xmp>
									</div>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">使用自定义的插件还需两步：</span><br>
									<span class="content-span">配置插件引用plugins: "-test"。(理论上官方插件也要有这一步配置)</span>
									<span class="content-span">将插件放入工具栏theme_advanced_buttons1: "undo,redo,bold,fontsizeselect,testBtn"</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">如不需要按钮，则按钮的定义部分和配置部分可省略</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span"><a href="#nogo" class="openPop">代码演示</a></span>
								</div>
							</div>
							<div class="content-text hidden textPage6">
								<h3 class="title3">6、public方法</h3>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">TinyMCE还提供很多公共方法，方便用户在创建插件、提交编辑内容或其他与编辑器的交互时使用。</span>
									<span class="content-span">tinyMCE.activeEditor.getContent()：获取编辑器内容（带标签）</span>
									<span class="content-span">tinyMCE.activeEditor.setContent(html)：获取编辑器内容（带标签）</span>
									<span class="content-span">tinyMCE.activeEditor.getElement(): 获取绑定的textarea元素</span>
									<span class="content-span">tinyMCE.activeEditor.onInit.add(func)：实例初始化完成后回调</span>
									<span class="content-span">tinyMCE.activeEditor.execCommand(command,[user_interface],[value])：执行某方法，可以带参数</span>
									<span class="content-span">tinyMCE.activeEditor.addCommand(pluginName,func)：为插件按钮添加click事件的回调</span>
									<span class="content-span">tinyMCE.activeEditor.onClick()：编辑器添加click事件回调</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">接下来以一个插件为例说明一下public方法的使用-<a href="#nogo" class="openPop">代码演示</a></span>
								</div>
							</div>
							<div class="content-pageBar">
								<div class="content-pageBar-item bg-red">1</div>
								<div class="content-pageBar-item bg-blue">2</div>
								<div class="content-pageBar-item bg-red">3</div>
								<div class="content-pageBar-item bg-blue">4</div>
								<div class="content-pageBar-item bg-red">5</div>
								<div class="content-pageBar-item bg-blue">6</div>
							</div>
						</div>
					</div>
					<div class="content hidden page4">
						<div class="content-box">
							<h2 class="content-title title2">四、同类产品对比</h2>
							<div class="content-text">
								<div class="content-p">
									<span class="content-span">javascript编写的富文本编辑器还有很多种，各有优缺点</span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">widgEditor：是一款极简的编辑器（33.4k）,简单实用但功能少。</span>
									<span class="content-span"><a href="http://code.google.com/p/widgeditor/downloads/list" target="_blank">http://code.google.com/p/widgeditor/downloads/list</a></span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">MarkItUp：基于jQuery，实用灵活，轻量。有许多第三方扩展，插件，皮肤。</span>
									<span class="content-span"><a href="http://markitup.jaysalvat.com/downloads/" target="_blank">http://markitup.jaysalvat.com/downloads/</a></span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">NicEdit： 功能齐全，支持多种标签如div、textarea。</span>
									<span class="content-span"><a href="http://www.nicedit.com/download.php" target="_blank">http://www.nicedit.com/download.php</a></span>
								</div>
								<div class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">YUI2：YAHOO开发，极简，灵活，代码量少。</span>
									<span class="content-span"><a href="http://yui.github.io/yui2/" target="_blank">http://yui.github.io/yui2/</a></span>
								</div>
							</div>
						</div>
					</div>
					<div class="content hidden page5">
						<div class="content-box">
							<h2 class="content-title title2">五、参考文献</h2>
							<div class="content-text">
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">
										TinyMCE官网：<a href="http://www.tinymce.com/" target="_blank">http://www.tinymce.com/</a>
									</span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">
										开源中国社区：<a href="http://www.oschina.net/" target="_blank">http://www.oschina.net/</a>
									</span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">
										github：<a href="http://www.tinymce.com/" target="_blank">https://github.com/</a>
									</span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">
										tinymce指南：<a href="http://www.myexception.cn/web/1599203.html" target="_blank">http://www.myexception.cn/web/1599203.html</a>
									</span>
								</p>
								<p class="content-p">
									<i class="content-icon"></i>
									<span class="content-span">
										tinymce中文：<a href="http://hauy.net/TinyMceManual/" target="_blank">http://hauy.net/TinyMceManual/</a>
									</span>
								</p>
							</div>
						</div>
					</div>
					<div class="floatBar">全屏</div>
				</div>
				<!--演示弹窗-->
				<div class="pop">
					<a href="#nogo" class="closePop">关闭</a>
					<div class="pop-content">
					<div class="content-tinydiv">
						<textarea id="content-tinyarea2">
							mode---/*textareas，specific_textareas(当textarea_trigger属性为true时)，exact*/<br><br>
							elements---/*mode值为exact时*/<br><br>
							theme---/*主题，默认值为*/<br><br>
						</textarea>
					</div>
					<div class="content-code" contenteditable="true">
						<div class="code-box">
							<xmp>tinymce.init({</xmp>
							<xmp>	mode: "exact",</xmp>
							<xmp>	elements: "content-tinyarea2",</xmp>
							<xmp>	theme: 'advanced',</xmp>
							<xmp>	width: '600px',</xmp>
							<xmp>	height: '532px',</xmp>
					   		<xmp>	theme_advanced_buttons1:"undo,redo,bold,fontsizeselect,forecolor"</xmp>
							<xmp>});</xmp>
						</div>
						<div class="code-run bg-blue" contenteditable="false">运行代码</div>
					</div>
					
					</div>
				</div>
			</div>
			<div class="screen hidden main3">
				<div class="end title1">
					Thanks！！！
				</div>
			</div>
		</div>
		<div class="footer"></div>
	</div>
</body>
</html>